<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Security Awareness Spinning Wheel</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="support/styles.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap5-toggle@5.0.4/css/bootstrap5-toggle.min.css" rel="stylesheet">
<script src="
https://cdn.jsdelivr.net/npm/winwheel@1.0.1/dist/Winwheel.min.js
"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script> 
<script src="support/cookies.js"></script>
<script language="javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=DOD&subagency=DSSCDSE"></script>
</head>
<body onLoad="getUrlParameter();">
<div class="container">
   <div class="row">
      <div class="col-lg-12">
         <header>
            <h1 align="center"><span class="quiz-title">Security Awareness</span><br>
               Spin The Wheel</h1>
         </header>
         <main> 
            <script> 
			// check to see if there is only only one category left
			var getvisited=sessionStorage.getItem('visited');
			if ((getvisited="yes") && (sessionStorage.length > 5)) {
			
			// if there is only one category left, say so
			document.write("<p align='center' style='font-size:150%;padding-bottom:15px;color:#f93d47;'>Only one category left!</p>");
			
				// and then display the button for that category
				if (sessionStorage.phishing == null)
					{
						document.write("<p align='center'><a href='phishing.html' class='btn btn-info btn-lg' role='button'>Phishing</a></p>");
					}
				else if (sessionStorage.emailsafety == null)
					{
						document.write("<p align='center'><a href='emailsafety.html' class='btn btn-info btn-lg' role='button'>Email Safety</a></p>");
					}
				else if (sessionStorage.onlinepresence == null)	
					{
						document.write("<p align='center'><a href='onlinepresence.html' class='btn btn-info btn-lg' role='button'>Your Online Presence</a></p>");
					}
				else if (sessionStorage.passwords == null) 
					{
						document.write("<p align='center'><a href='passwords.html' class='btn btn-info btn-lg' role='button'>Passwords</a></p>");
					}
				else if (sessionStorage.smartphone == null) 
					{
						document.write("<p align='center'><a href='smartphone.html' class='btn btn-info btn-lg' role='button'>Smartphone and Tablets</a></p>");
					}
				else if (sessionStorage.socialmedia == null)
					{
						document.write("<p align='center'><a href='socialmedia.html' class='btn btn-info btn-lg'role='button'>Social Media</a></p>");
					}
				}
				
				// if there is more than one category left
				if (sessionStorage.length < 6) {
					
					document.write("<p align='center'><a href='#' class='btn btn-info btn-lg' role='button' id='spin_button' aria-label='Button to spin the wheel' onClick='startSpin()'>SPIN THE WHEEL</a></p><p align='center'><input id='toggle-trigger' type='checkbox' data-toggle='toggle' aria-label='Pause and Resume wheel spin' data-height='24' data-onlabel='RESUME' data-offlabel='PAUSE' data-onstyle='info' data-offstyle='secondary'></p>");
					
					document.write("<audio id='winsound'><source src='support/wheel.mp3'></audio>");
					
					document.write("<p align='center'><img src='support/wheel_back.png' alt='wheel'><br><canvas id='canvas' aria-label='Cybersecurity Trivia Twirl Game, Spin the wheel to access each category (Cyber Insider Threat, Email Safety, Your Online Presence, Passwords, Smartphone and Tablets, and Social Media)' width='400' height='400' style='border-radius:50%;position:relative;border:8px solid #fff;box-shadow:rgba(0,0,0,0.2) 0px 0px 10px, rgba(0,0,0,0.05) 0px 3px 0px;'></canvas></p>");
				
					var theWheel = new Winwheel ({
					'outerRadius'  : 200, 
					'textFontSize' : 12,
					'responsive'   : true,
					'segments'     :        
					[		
					   {'fillStyle' : '#429ce0', 'text' : 'Social Media'}
					],
					'animation' :           
					{
						'type'     : 'spinToStop',
						'duration' : 5,     
						'spins'    : 2,     
						'callbackFinished' : 'alertPrize()'
					}
					});
					
					if (sessionStorage.phishing == null) {  
						theWheel.addSegment({'fillStyle' : '#00FFFF', 'text' : 'Phishing'}, 1);
						theWheel.draw();
					}
					if ((sessionStorage.emailsafety == null) && (sessionStorage.emailsafety !== '')) {  
						theWheel.addSegment({'fillStyle' : '#feb745', 'text' : 'Email Safety'}, 1);
						theWheel.draw();
					}
					if ((sessionStorage.onlinepresence == null) && (sessionStorage.onlinepresence !== '')) {  
						theWheel.addSegment({'fillStyle' : '#fc646e', 'text' : 'Your Online Presence'}, 1);
						theWheel.draw();
					}
					if ((sessionStorage.passwords == null) && (sessionStorage.passwords !== '')) {  
						theWheel.addSegment({'fillStyle' : '#fa68cb', 'text' : 'Passwords'}, 1);
						theWheel.draw();
					}
					if ((sessionStorage.smartphone == null) && (sessionStorage.smartphone !== '')) {  
						theWheel.addSegment({'fillStyle' : '#be7fdc', 'text' : 'Smartphone and Tablets'}, 1);
						theWheel.draw();
					}
					if (sessionStorage.socialmedia === '6') {  
						theWheel.deleteSegment(6);
						theWheel.draw();
					}

					var wheelPower    = .01;
					var wheelSpinning = true;
					var winsound = document.getElementById('winsound');

					function startSpin() {
						winsound.play();
						if (wheelSpinning == true) {
							if (wheelPower == .01) {
								theWheel.animation.spins = 2;
							}
							else {
								theWheel.animation.spins = 2;
							}
						theWheel.startAnimation();
						}
					}

					document.getElementById("toggle-trigger").addEventListener("change", function() {
						var toggleElement = document.getElementById("toggle-trigger");
						if(toggleElement.checked){
							winsound.pause();
							theWheel.pauseAnimation();
						}
						else{
							if(winsound.currentTime === 0){
								winsound.pause();
								theWheel.resumeAnimation();
							}
							else{
								winsound.play();
								theWheel.resumeAnimation();
							}
						}
					});
				
					function alertPrize() {
					var winningSegment = theWheel.getIndicatedSegment();
						if (winningSegment.text == 'Phishing') {
							window.setTimeout(function(){
								window.location.href='phishing.html';
							}, 1000);				
						}
						else if (winningSegment.text == 'Email Safety') {
							window.setTimeout(function(){
								window.location.href='emailsafety.html';
							}, 1000);				
						}
						else if (winningSegment.text == 'Your Online Presence') {
							window.setTimeout(function(){
								window.location.href='onlinepresence.html';
							}, 1000);				
						}
						else if (winningSegment.text == 'Passwords') {
							window.setTimeout(function(){
								window.location.href='passwords.html';
							}, 1000);				
						}	
						else if (winningSegment.text == 'Smartphone and Tablets') {
							window.setTimeout(function(){
								window.location.href='smartphone.html';
							}, 1000);				
						}
						else if (winningSegment.text == 'Social Media') {
							window.setTimeout(function(){
								window.location.href='socialmedia.html';
							}, 1000);				
						}
						else {
							alert("Oops! Please spin again.");
							location.reload();
						}
					}
					
            	document.write("<p align='center' style='padding-top:15px;font-size:150%;'><a href='support/cookies-clear.html'>Want to start the game over?</a><br><span style='font-size:70%;padding-top:10px;font-family:Georgia;font-style:italic;text-decoration:underline;'><a href='support/learn.html'>Learn how to play.</a></span></p>");
       
			}
			if (sessionStorage.length === 7) {
				document.write("<p align='center'>You have completed the game.<br><a href='support/cookies-clear.html'>Play again?</a></p>");
			}
			 </script> 
         </main>
      </div>
   </div>
</div>
<script
  src="https://code.jquery.com/jquery-3.7.0.min.js"
  integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
  crossorigin="anonymous"></script> 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap5-toggle@5.0.4/js/bootstrap5-toggle.ecmas.min.js"></script>
</body>
</html>
